<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>kubernetes补全</title>
    <url>/2024/08/29/bash-completion/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dnf -y install bash-completion</span><br><span class="line">source /usr/share/bash-completion/bash_completion</span><br><span class="line">source &lt;(kubectl completion bash)</span><br><span class="line">echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc`</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">live2d:</span><br><span class="line">      enable: true</span><br><span class="line">      scriptFrom: local</span><br><span class="line">      model:</span><br><span class="line">        scale: 1</span><br><span class="line">        hHeadPos: 0.5</span><br><span class="line">        vHeadPos: 0.618</span><br><span class="line">      display:</span><br><span class="line">        superSample: 2</span><br><span class="line">        width: 150</span><br><span class="line">        height: 300</span><br><span class="line">        position: right</span><br><span class="line">        hOffset: 0</span><br><span class="line">        vOffset: -20</span><br><span class="line">     mobile:</span><br><span class="line">        show: false</span><br><span class="line">      react:</span><br><span class="line">        opacityDefault: 0.5</span><br><span class="line">        opacityOnHover: 0.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Operations</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title>initcontainerds（初始化容器）</title>
    <url>/2024/08/29/initcontainers/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="81b7eb4c12eb48076f7660f87dd87643ca3be89b345fb49023618bb9f78e4329">1d621d107eecb08cb114bf54a2314bea78ce2de3ceea69c9b1319b36acb16a21f1235ccec79e0068d258269c21e5d67f116aa7662e0e78866fe22d3ab76af44bd172786690691869bf370be06022e35a512df7452b33b3122be61036346097f24e6f25a6678c9622acde32518a418ce94dcbca843093a0cee78aee26e3b7d7c720c234382f77486c2c0ceaec86fda7f9167ab30c682e1aacb178778eb8049223e9f1c2d4dc84115c4930d79852766d672a3b2506b757189aa3841b7140cc47cc73595d163a47a2923fd7caee22e657182a9698cafc8764550d54742f75de560e5134af59a863ceedd2efab25699d2a94c42b03207fe99dd37db308eaeab344683072d9476e9e9097cd7122b9741321beb58ff123dd412a2fb273898c5d12bb2676cd24fc8c0096d16781ce45b4b8832f3b6bd3e4cdf234a7a2fb54e97f7a611b355dcd4c069cef4074e7fe8557f7ff97f5e54446a7fd9eb6641011d75e633c2734d3becc8a38276be6e0d9b02357243867764e2de04680752e69c52646d11ac06726c12f6978805ca67f189a3dd80a33ab72c2824b13ae79418ac3cb270c52b6fc8ebb9149853706ba9a2c734c91fa3a5951724c2f09b1f798d03689acc9b49eb550c4937fa7ad3db512342fd8126817106d50c6351de2760380df014e7b4c060b57836cfe576cae390a53674c475ee8d59a8403161ae79df03b83cd0331450dfa25bbdd7538e3a323166bf6c980989bd9dab9e85b2c3341f34ec6d6c5e70174e9540e21a4982e02204a6962a679a585c7c17986da6da9824ec49d36b45c128300cf4b6944b88b92f7fd66799d05ad874ed34ab9c4ce4a10cd0ca1008d53e5a797bdac7b2ebf067c5852724a99500eb8f34027d6bacc0bba64d984a6580ff05e493641110ff7fdf9a1364ba26cba618a4af58fda2c1bd5867c621754cefa8848ead03befd4ca9991e2df128080cfbfca5aacaa3e15574e8031af8a6d40a553e03af61207be18b00978ec7d368f7ea4e9078b9a86cfc16881f0e31536050726c41979214eb7f81ef6f1269857244cab6299ac82f548f151da373fdf80139eaa1501d30490c3ebf092fc46de5ef15aed51d3a607dd626cca78d0988ded9ab55da3127007180f8e714bd86c3942c97a4a5bc07ae96fee0eafbbb452d689318f418d51f132b0db10e88027b900694245581e14423bcd0fbdef5a8773be92788b3633648552fdaecc77c0da41d9438f22ada175ce243d28f41e252305d436807238fa0f49622a020ca304960595b9d1bd2447245fa19fd73e96f88705e6cff94d5ff2a6eb630c8cc8c2f3434114bdba7091314e8145e880bfe5dfaf800a9b9cce19811ffd1c0c89341606650a8498c4e10927e744c553413e878486a0090253bf780bd1aed1c78196ddde812890096a323ab84989796b70f60c101526b290aea6f44dc74a9c76301e90905577b62085f03464aa9ae31dff57d0e1609628627c90a0a3fa694488863d9353daa191b43a9e3dd10aee7ff70406c70cab0d726b5f3f09b1395ea4df621b7fd27091517ac5e7a8776a10a46808fe976974ec2b73ad1f61d58aac4d219aa928003958073ba46476495ba258d20815f78fe97d81c0c0915d304e21afc964b72731a341eb07ac2d8b24a0b9e37656870b3c6a0641fd8bbfd78ad51ac72beea010cb0135d22f44199ab537b23138da1aae03e051537ce197a2f438606a7c23777b8568d27c80c3f3331360804fe7493c8f1f64b5dc6fa357925f0452e618f6306be329af57811a1864db4c04b180ef632f8dc7672b6fb8f470e1a57774f8b22947fabecd51d353f0734b7ea72c76ff5f5f9ff8fb58494c2dce7a5bba82e1497121722846980503888e1d2d2f760d72856f048829b2bcad0dd1c862cea7274b1952812831cb37ab2291ab21b62feabdb7092e7675db3b43951363149f99d8f011efdfaf9a57a7a217e7175bbec65376baac6f15f0e4309bfec93ce4b1b8e0dd98c36637f4588a64592d6f940f7ff9fce3cd5cefce3baab1252b37ab4684818a909c2f654fa7579339b49bbd7d128ce586812cddcf2c93eedde5729d5af3298e8ac52619535d40de3ec476fef1c25ec334666932657d8ff32798d0f94373c2fb422fe0091c7628b7988c2e24363c391c63ab2a2ead624137ff8869b892624cee3d5daee4bb563a3697e9aeb5447ec97e280b446492484c73ffb8f21d18d4c6ec31ae1467c01df4a57376096cedd587f5e6e452e3411d23a658745ef68130551a9de0873947d4e0e44842e3084bf7d6a2c9af85ce77b692d94890ee00322cb61179b60fefb27a8fcf02d4e7b89a352c76fc60bc946426d249e6293a155aa7173a1af83147a608f657ae99f2d57d7e758e429e87eae8d24e36f5461e829becabd49db7d969e892ffc4c1fcd90fd5a54e8ac30d4d39a691e2f938911d09f0b44f8f85b921dea1e75bfce74cbbadba36d98d2a6c5e4bff8140da58155e5e5f13174d760a158d9c069bd8d1cf95281ca9bddc39c43045248dddc6adb7ed6e1fd0e9250bb7d3d7f3890885d7df712acbb3c702fab2f50f7adbfd1c6f4890ee8b523f6d1e05bc322c80ce8eaf936bc02cd18f09c03417c61cce6c95d289149dfc46add155bdf138acbce41b9e231ffd960391ad0d296e3a52e56b1ec77c6c473123fbb17274334987e7884a16f25f5422785d086ce9dd5cf24ee273e10d4187b1ee62d9b7dd15c564fe413b99723757d129f0f8630bd3b1869a621b5d08648af9fc67c39bde01b6a9ee6c4628985fbb6c03f894f74a898aca24f6852b01e34357b56af5e480f37193079e2cb677af01706c5aedd7757ca75ac7c28d83cd039ff9e3e98f155c5727c816e8b32e775b8aa09384b8e3c0ec9c56aac57e365dc61b62ede217ef50da58dd5576159190c01031be2cdca2f36dcace57901fb85776545be48802c23c41697b3cbe62eac782a9d7e81df20993fc7136af92108108cafa0dd4043ccc8e42dc928fb12188ff19e1739bed93d0bc3365617222b536443a5e00ea4e8d3ae85d9273486f8994bf067d0091de7c5a67da02557e6f8b922c7ed95dd6bfb5accc7745f7e26c04c4c95a0a0dc767dcef37d8d0961ca1d6e2ca38b3e327f48a30c1bf2aa93b1ccccca5d205fe993c1a5400028c10bd2dfea8140d7f7221b913b17e9cef4d554b44da2405c71496e2dfbf4327bc5589c2d13e3d73e6b80b189d628dbbb9c43e7ac5adcbf305860e92e70f894ad80463a5c17ca7dc29e1b91703f00b4b507ba91720ef9e11578a1d1340c4e80ac537899202990750a747825b0a2e325b00dee86994470cd74a317eb8168495f8fe82379156c735efef33a20c5fba6674eee33758251727a2642221031e0eb8bbae5a0e93e16de7fd2246de5f1cf3bf61604e9dd90733dde014cc2573ca9d6ff5cf1bc8f18d75ff9dcdf2ad0205a864bcde35c8c7e6ffe9986ba5fa67ea00b01d7aae1570e86a3b269af51a57cd15f29f5e2cc7a07b000328e663d798fec17b1f0b9daac0dcc7d7d24a03583a41a82d11b1ecbbb361cad195f0ba492c5c255ca99831cd205c6d2ef70a2ce37212c8a45a2291484080c5637dae856acbf795acdc2ff7fd30d8f67f91fad58cc5487baf3058cda003d40f902fdcbb9911085ef1c7e21192cd1100bb6cfdd6922001eeef3705342098b1b0a362602ea3e347e92bce6defc9bc5949140c7bc818494f93dfeb7677e014a28a474618eb6a696f4679acd2bfcbc724b735402a11d918152b109bc23fd5ae9bfdbfcee4e4bee58114aa1f62f5b44808a911997112af1203cb72b79b4d56529bdc763a9834ca9a78d7fce50be999720d03af2e89106b9ed8d80a37bc20374cde62f682c6ea129146331ba13bec721f0729961221644e31c73d4b64e1d5ddfb6cfa9c91a0780cd1bb86f1d25af9bad385bb19e81e98ba82cfc930b26e41705fc6791af6ccb80f553fbc87b22eba1e543491b4ecf376f19f97d03d4fff890b10da22066f6e7a3406498de920e5b6adcae6c2ca15045e8d7b67198cfe0e5b2af4960026f39bfa54c984d4f8e62a7a0abed5fd1893153b25a3a1306524269683b39aa97ab94146e01a90a4f3ee2778bcfc4e43e27620a1e6f23816ff978d55cdb0a8e701991960c918fda1021fef25c617885f4a1486a4584b978c90f0f18dff7e1313aad42aebebd4a59b250fa297f1b753b60cf4d0a985a5abfc0efdc35ae3e2cefb50d6</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码查看内容</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Operations</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title>docker镜像导入k8s</title>
    <url>/2024/08/29/docker%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5k8s/</url>
    <content><![CDATA[<ul>
<li><code>也可以在/etc/containerd/cer.d/下面添加docker，aliyun，tengxun各种镜像加速，他就能自动识别各种镜像</code>也可以使用手动的方法导入镜像</li>
</ul>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#设置docker镜像加速地址</span><br><span class="line">cat /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.rainbond.cc/&quot;,&quot;https://docker.m.daocloud.io&quot;,&quot;https://noohub.ru&quot;,&quot;https://huecker.io&quot;,&quot;https://dockerhub.timeweb.cloud&quot;]</span><br><span class="line">&#125;</span><br><span class="line">#重启后拉去镜像</span><br><span class="line">docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line"> latest: Pulling from library/nginx</span><br><span class="line">e4fff0779e6d: Pull complete</span><br><span class="line">9c4e4e507b08: Pull complete</span><br><span class="line">85664e7b25d6: Pull complete</span><br><span class="line">e9d00ba15cc0: Pull complete</span><br><span class="line">ca3474dd2ca6: Pull complete</span><br><span class="line">472851929ad7: Pull complete</span><br><span class="line">ed60582f2661: Pull complete</span><br><span class="line">Digest: sha256:93db6ea665b5485e59f0b35e506456b5055925d43011bdcc459d556332d231a2</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br><span class="line"></span><br><span class="line">#查看镜像</span><br><span class="line">[root@master01 ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    900dca2a61f5   7 weeks ago   188MB</span><br><span class="line"></span><br><span class="line">#保存镜像</span><br><span class="line">[root@master01 ~]# docker save -o nginx.tar.gz nginx:latest</span><br><span class="line"></span><br><span class="line">#查看镜像成功</span><br><span class="line">[root@master01 ~]# ls</span><br><span class="line">anaconda-ks.cfg  nginx.tar.gz</span><br><span class="line"></span><br><span class="line">#ctr加入域名导入镜像</span><br><span class="line">[root@master01 ~]# ctr -n k8s.io image import nginx.tar.gz</span><br><span class="line">unpacking docker.io/library/nginx:latest (sha256:7183446dbb193731a504732a9399947a37f54477a61efff97113ebd23f31ad00)...done</span><br><span class="line"></span><br><span class="line">#删除镜像</span><br><span class="line">[root@master01 ~]# crictl rmi docker.io/library/nginx</span><br><span class="line">Deleted: docker.io/library/nginx:latest</span><br><span class="line"></span><br><span class="line">#导入镜像</span><br><span class="line">[root@master01 ~]# ctr -n k8s.io image import nginx.tar.gz</span><br><span class="line">unpacking docker.io/library/nginx:latest (sha256:7183446dbb193731a504732a9399947a37f54477a61efff97113ebd23f31ad00)...done</span><br><span class="line">#查看镜像</span><br><span class="line"></span><br><span class="line">[root@master01 ~]# crictl images</span><br><span class="line">IMAGE                                                             TAG                 IMAGE ID            SIZE</span><br><span class="line">docker.io/library/nginx                                           latest              900dca2a61f57       192MB</span><br><span class="line">registry.aliyuncs.com/google_containers/nginx                     latest              </span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Operations</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title>ReplicaSet（副本集合）</title>
    <url>/2024/09/02/ReplicaSet/</url>
    <content><![CDATA[<h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h1><ul>
<li><p><strong>ReplicaSet</strong> 是 Kubernetes 控制器的一种，负责维护一个指定数量的 Pod 副本。它会自动创建、删除 Pod，以确保在任何时间点都有固定数量的 Pod 在运行。</p>
</li>
<li><p><strong>ReplicaSet</strong> 通常作为 <strong>Deployment</strong> 控制器的一部分使用，但也可以单独使用。Deployment 提供了更高级的功能，如滚动更新和</p>
<p>回滚，而 ReplicaSet 专注于维护 Pod 副本的数量。</p>
</li>
</ul>
<span id="more"></span>

<h3 id="1-1-ReplicaSet组成部分"><a href="#1-1-ReplicaSet组成部分" class="headerlink" title="1.1 ReplicaSet组成部分"></a>1.1 <strong>ReplicaSet</strong>组成部分</h3><ul>
<li>期望的Pod副本数</li>
<li>Pod选择器（那些标签的pod是我们管理的）</li>
<li>Pod资源模板（新的pod是通过模板来创建的）</li>
</ul>
<h3 id="1-2-ReplicaSet-yaml"><a href="#1-2-ReplicaSet-yaml" class="headerlink" title="1.2 ReplicaSet yaml"></a>1.2 ReplicaSet yaml</h3><h4 id="1-2-1-rs文件夹"><a href="#1-2-1-rs文件夹" class="headerlink" title="1.2.1 rs文件夹"></a>1.2.1 rs文件夹</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /rs</span><br><span class="line"><span class="built_in">cd</span> /rs</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-帮助命令查"><a href="#1-2-2-帮助命令查" class="headerlink" title="1.2.2 帮助命令查"></a>1.2.2 帮助命令查</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl explain rs</span><br></pre></td></tr></table></figure>

<h4 id="1-2-3-副本伸缩"><a href="#1-2-3-副本伸缩" class="headerlink" title="1.2.3 副本伸缩"></a>1.2.3 副本伸缩</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl scale replicaset demo --replicas=1</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-查看rs和状态"><a href="#1-2-4-查看rs和状态" class="headerlink" title="1.2.4 查看rs和状态"></a>1.2.4 查看rs和状态</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl get rs</span><br><span class="line">kubectl kubectl describe rs demo </span><br></pre></td></tr></table></figure>

<h4 id="1-2-5-资源清单"><a href="#1-2-5-资源清单" class="headerlink" title="1.2.5 资源清单"></a>1.2.5 资源清单</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ReplicaSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">hello</span> <span class="string">everybody</span></span><br><span class="line">    <span class="attr">createby:</span> <span class="string">ethan</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">demo</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">rs:</span> <span class="string">dd</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">minReadySeconds:</span> <span class="number">3</span> </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span>     </span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchExpressions:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">app</span></span><br><span class="line">      <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">      <span class="attr">values:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">example-rs</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">example-rs</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">example-nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8081</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">example-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">example-rs</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8081</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">nodePort:</span> <span class="number">30007</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Operations</category>
        <category>k8sa</category>
      </categories>
      <tags>
        <tag>Controller-rs</tag>
      </tags>
  </entry>
  <entry>
    <title>Service</title>
    <url>/2024/09/03/Service/</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
