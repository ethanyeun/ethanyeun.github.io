<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ethanblog</title>
  
  <subtitle>Go Fuck YourSelf</subtitle>
  <link href="http://ethanyeun.github.io/atom.xml" rel="self"/>
  
  <link href="http://ethanyeun.github.io/"/>
  <updated>2024-08-29T08:47:27.550Z</updated>
  <id>http://ethanyeun.github.io/</id>
  
  <author>
    <name>ethan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>初始化容器</title>
    <link href="http://ethanyeun.github.io/2024/08/29/initcontainers/"/>
    <id>http://ethanyeun.github.io/2024/08/29/initcontainers/</id>
    <published>2024-08-29T02:52:30.000Z</published>
    <updated>2024-08-29T08:47:27.550Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;initcontainerds&quot;&gt;&lt;a href=&quot;#initcontainerds&quot; class=&quot;headerlink&quot; title=&quot;initcontainerds&quot;&gt;&lt;/a&gt;initcontainerds&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-pod-initialization/&quot;&gt;配置 Pod 初始化 | Kubernetes&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;在pod中可以有一个或者多个初始化容器&lt;/li&gt;
&lt;li&gt;初始化容器执行成功后，应用的容器才能被执行&lt;/li&gt;
&lt;li&gt;初始化容器是仅运行一次的任务&lt;/li&gt;
&lt;li&gt;可以完成与预先指定的任务,阻止或者延迟容器启动&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: initnginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  initContainers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: busybox&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    command:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - wget&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - &amp;quot;-O&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - &amp;quot;/work-dir/index.html&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - &amp;quot;https://www.baidu.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    volumeMounts:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - name: workdir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      mountPath: /work-dir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: 172.20.45.174:81/base/nginx:1.15-alpine&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    volumeMounts:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - name: workdir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      mountPath: /usr/share/nginx/html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  dnsPolicy: Default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  volumes:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: workdir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    emptyDir: &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="kubernetes" scheme="http://ethanyeun.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>k8s补全</title>
    <link href="http://ethanyeun.github.io/2024/08/29/hello/"/>
    <id>http://ethanyeun.github.io/2024/08/29/hello/</id>
    <published>2024-08-29T02:52:30.000Z</published>
    <updated>2024-08-29T07:59:19.274Z</updated>
    
    
    <summary type="html">&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dnf -y install bash-completion&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source /usr/share/bash-completion/bash_completion&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source &amp;lt;(kubectl completion bash)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;source &amp;lt;(kubectl completion bash)&amp;quot; &amp;gt;&amp;gt; ~/.bashrc`&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="kubernetes" scheme="http://ethanyeun.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/k8s%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8/"/>
    <id>http://ethanyeun.github.io/2024/08/16/k8s%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8/</id>
    <published>2024-08-16T14:29:08.148Z</published>
    <updated>2024-08-29T02:50:43.968Z</updated>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h2 id=&quot;title-“k8s自动补全”date-2024-08-29&quot;&gt;&lt;a href=&quot;#title-“k8s自动补全”date-2024-08-29&quot; class=&quot;headerlink&quot; title=&quot;title: “k8s自动补全”date: 2024-08-29&quot;&gt;&lt;/a&gt;title: “k8s自动补全”&lt;br&gt;date: 2024-08-29&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dnf -y install bash-completion&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source /usr/share/bash-completion/bash_completion&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; source &amp;lt;(kubectl completion bash)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; echo &amp;quot;source &amp;lt;(kubectl completion bash)&amp;quot; &amp;gt;&amp;gt; ~/.bashrc`&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/taints/"/>
    <id>http://ethanyeun.github.io/2024/08/16/taints/</id>
    <published>2024-08-16T12:12:52.675Z</published>
    <updated>2024-08-29T08:50:09.502Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;taints（污点）&quot;&gt;&lt;a href=&quot;#taints（污点）&quot; class=&quot;headerlink&quot; title=&quot;taints（污点）&quot;&gt;&lt;/a&gt;taints（污点）&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;给节点主动权，我给节点打一个&lt;strong&gt;污点&lt;/strong&gt; ,不容忍的pod就运行不上来，污点可以决定决绝那些pod&lt;/p&gt;
&lt;p&gt;污点都是打在node上的，污点和容忍度是一起使用的，pod使用人容忍度参数&lt;/p&gt;
&lt;p&gt; [污点容忍度](&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/taint-and-toleration/&quot;&gt;污点和容忍度 | Kubernetes&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#给node打上污点，污点可以是key值也可以是value值，看容忍等级&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl taint nodes  node03  dedicated=special-user:NoSchedule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node03 tainted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看污点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl describe node node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Name:               node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Roles:              work03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Labels:             beta.kubernetes.io/arch=amd64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    beta.kubernetes.io/os=linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    kubernetes.io/arch=amd64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    kubernetes.io/hostname=node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    kubernetes.io/os=linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    node-role.kubernetes.io/work03=work03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    xixi=hello4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    node.alpha.kubernetes.io/ttl: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    projectcalico.org/IPv4Address: 10.10.10.60/24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    projectcalico.org/IPv4IPIPTunnelAddr: 10.244.186.192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    volumes.kubernetes.io/controller-managed-attach-detach: true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CreationTimestamp:  Mon, 12 Aug 2024 21:22:23 +0800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Taints:             dedicated=special-user:NoSchedule   &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/podAntiAffinity/"/>
    <id>http://ethanyeun.github.io/2024/08/16/podAntiAffinity/</id>
    <published>2024-08-16T12:08:36.715Z</published>
    <updated>2024-08-16T12:10:44.480Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;podANtiAffinity（反亲和性）&quot;&gt;&lt;a href=&quot;#podANtiAffinity（反亲和性）&quot; class=&quot;headerlink&quot; title=&quot;podANtiAffinity（反亲和性）&quot;&gt;&lt;/a&gt;podANtiAffinity（反亲和性）&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#创建第一个pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: hi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wuwu: wuwu1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: xixi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#创建反亲和性pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: hh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  affinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    podAntiAffinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requiredDuringSchedulingIgnoredDuringExecution:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      - labelSelector:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          matchExpressions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          - key: wuwu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            operator: In&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - wuwu1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        topologyKey: kubernetes.io/hostname     也可以自己创建标签，标签要key值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#查看调度 调度不同位置就可以了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods --show-labels -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          19s   10.244.196.133   node01   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;            app=hh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hi      1/1     Running   0          59m   10.244.186.198   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;            wuwu=wuwu1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/podAffinity/"/>
    <id>http://ethanyeun.github.io/2024/08/16/podAffinity/</id>
    <published>2024-08-16T05:55:56.329Z</published>
    <updated>2024-08-16T08:10:52.722Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;podaffinity&quot;&gt;&lt;a href=&quot;#podaffinity&quot; class=&quot;headerlink&quot; title=&quot;podaffinity&quot;&gt;&lt;/a&gt;podaffinity&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#pod与pod之间的亲和性需要首先创建一个pod，然后亲和性的pod关联住这个pod，再分配到该节点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#这两个pod都不能设置命名空间，需要在默认的命名空间&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#创建一个pod并添加标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: hi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wuwu: wuwu1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: xixi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#亲和性pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: hh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  affinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    podAffinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requiredDuringSchedulingIgnoredDuringExecution:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      - labelSelector:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          matchExpressions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          - key: wuwu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            operator: In&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - wuwu1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        topologyKey: kubernetes.io/hostname      #node的标签key值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看pod的标签分配到那个地址了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; kubectl get pod -l wuwu=wuwu1 -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME   READY   STATUS    RESTARTS   AGE     IP               NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hi     1/1     Running   0          5m17s   10.244.186.198   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pod -owide --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE     IP               NODE     NOMINATED NODE   READINESS GATES   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          7m15s   10.244.186.199   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;            &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hi      1/1     Running   0          6m5s    10.244.186.198   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;            wuwu=wuwu1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/affinity-nodeAffinity/"/>
    <id>http://ethanyeun.github.io/2024/08/16/affinity-nodeAffinity/</id>
    <published>2024-08-16T05:07:05.641Z</published>
    <updated>2024-08-16T05:55:29.098Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;nodeAffinity（亲和性）&quot;&gt;&lt;a href=&quot;#nodeAffinity（亲和性）&quot; class=&quot;headerlink&quot; title=&quot;nodeAffinity（亲和性）&quot;&gt;&lt;/a&gt;nodeAffinity（亲和性）&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#nodeAffinity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;preferred  #优先   不必须的亲和性     软亲和性&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;required   #必须   硬亲和性&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  namespace: lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  affinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nodeAffinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requiredDuringSchedulingIgnoredDuringExecution:    #硬亲和性&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeSelectorTerms:                               #node选择器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - matchExpressions:							   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          - key: hello								 	 #key值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            operator: In							     #满足条件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;100Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;250m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;500Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;500m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#给三个容器都打上标签容器只会优先选择第一个标签，而不会同时给三个节点全部上pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label nodes node03 hello=hello1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node03 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          2m33s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label nodes node02 hello=hello2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node02 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label nodes node01 hello=hello3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n lucas --show-labels -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE     IP               NODE     NOMINATED NODE   READINESS GATES   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          3m38s   10.244.186.195   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;            app=nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#preferred&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#没有满足条件随机调度，不是必须的，相同满足条件则是权重高的调度&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  namespace: lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  affinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nodeAffinity:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      preferredDuringSchedulingIgnoredDuringExecution:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      - preference:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          matchExpressions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          - key: hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            operator: In&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        weight: 10   #权重低&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      - preference:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          matchExpressions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          - key: helloman&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            operator: In&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            - hello6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        weight: 20   #权重高&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;100Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;250m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;500Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;500m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#优先匹配标签，不匹配权重，如果有标签则调度标签的，如果相同标签下则调度到权重高的节点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node node03 hello=hello1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node03 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node node01 helloman=hello3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl  apply -f pod-nginx.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod/ethan created&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          12s   10.244.186.196   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node node01 helloman-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node01 unlabeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node node01 helloman=hello6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          61s   10.244.186.196   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl delete -f pod-nginx.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod &amp;quot;ethan&amp;quot; deleted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl apply  -f pod-nginx.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod/ethan created&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          4s    10.244.196.131   node01   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/16/selector/"/>
    <id>http://ethanyeun.github.io/2024/08/16/selector/</id>
    <published>2024-08-16T03:11:53.551Z</published>
    <updated>2024-08-16T05:06:38.542Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;节点选择器&quot;&gt;&lt;a href=&quot;#节点选择器&quot; class=&quot;headerlink&quot; title=&quot;节点选择器&quot;&gt;&lt;/a&gt;节点选择器&lt;/h1&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;nodeName&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  namespace: lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  nodeName: node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;100Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;250m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;500Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;500m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看node调度到那个节点上了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n lucas -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          50s   10.244.186.194   node03   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;nodeSelector   &amp;lt;map[string]string&amp;gt;  键值对匹配标签&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  namespace: lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app: nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  nodeSelector:      #匹配node标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    disk: ceph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;100Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;250m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memory: &amp;quot;500Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cpu: &amp;quot;500m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#pending是调度中&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   0/1     Pending   0          11s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看pod详细信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl describe pods -n lucas ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Name:             ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Namespace:        lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Priority:         0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Service Account:  default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Node:             &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Labels:           app=nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Annotations:      &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status:           Pending&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IP:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IPs:              &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  helloy:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Image:      nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Port:       80/TCP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Host Port:  0/TCP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      cpu:     500m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      memory:  500Mi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      cpu:        250m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      memory:     100Mi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Environment:  &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Mounts:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-fcs82 (ro)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Conditions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Type           Status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PodScheduled   False&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Volumes:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  kube-api-access-fcs82:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Type:                    Projected (a volume that contains injected data from multiple sources)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TokenExpirationSeconds:  3607&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ConfigMapName:           kube-root-ca.crt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ConfigMapOptional:       &amp;lt;nil&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DownwardAPI:             true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;QoS Class:                   Burstable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Node-Selectors:              disk=ceph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Events:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Type     Reason            Age   From               Message&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ----     ------            ----  ----               -------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Warning  FailedScheduling  38s   default-scheduler  0/4 nodes are available: 1 node(s) had untolerated taint &amp;#123;node-role.kubernetes.io/control-plane: &amp;#125;, 3 node(s) didn&amp;#x27;t match Pod&amp;#x27;s node affinity/selector. preemption: 0/4 nodes are available: 4 Preemption is not helpful for scheduling.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#调度失败给node02打标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node node02 disk=ceph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node02 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get nodes --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    work02   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,disk=ceph,kubernetes.io/arch=amd64,kubernetes.io/hostname=node02,kubernetes.io/os=linux,node-role.kubernetes.io/work02=work02&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes -l disk=ceph&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME     STATUS   ROLES    AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02   Ready    work02   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          4m16s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get pods -n lucas -owide&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS   AGE     IP              NODE     NOMINATED NODE   READINESS GATES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   0          4m23s   10.244.140.67   node02   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;nodeSelector和nodeName不能写在一起，不然的会调度失败&quot;&gt;&lt;a href=&quot;#nodeSelector和nodeName不能写在一起，不然的会调度失败&quot; class=&quot;headerlink&quot; title=&quot;nodeSelector和nodeName不能写在一起，不然的会调度失败&quot;&gt;&lt;/a&gt;nodeSelector和nodeName不能写在一起，不然的会调度失败&lt;/h2&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/15/lables/"/>
    <id>http://ethanyeun.github.io/2024/08/15/lables/</id>
    <published>2024-08-15T10:27:20.389Z</published>
    <updated>2024-08-16T04:12:49.079Z</updated>
    
    
    <summary type="html">&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#查看pod的标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n jenny --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS      AGE   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   1 (54m ago)   25h   app=nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#给pod 打标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label  pods -n jenny ethan hello=nginx-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod/ethan labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n jenny --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS      AGE   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   1 (55m ago)   25h   app=nginx-1,hello=nginx-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label pods -n jenny ethan xixi=nginx-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pod/ethan labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n jenny --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    READY   STATUS    RESTARTS      AGE   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethan   1/1     Running   1 (56m ago)   25h   app=nginx-1,hello=nginx-2,xixi=nginx-3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;更改角色标签&quot;&gt;&lt;a href=&quot;#更改角色标签&quot; class=&quot;headerlink&quot; title=&quot;更改角色标签&quot;&gt;&lt;/a&gt;更改角色标签&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#查看node标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get nodes --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES           AGE     VERSION   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    control-plane   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=master01,kubernetes.io/os=linux,node-role.kubernetes.io/control-plane=,node.kubernetes.io/exclude-from-external-load-balancers=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node master01 node-role.kubernetes.io/control-plane=master01&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node master01 node-role.kubernetes.io/master=master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/master01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES                  AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    control-plane,master   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    &amp;lt;none&amp;gt;                 2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    &amp;lt;none&amp;gt;                 2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    &amp;lt;none&amp;gt;                 2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#去掉master标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node master01 node-role.kubernetes.io/master-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/master01 unlabeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES           AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    control-plane   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    &amp;lt;none&amp;gt;          2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    &amp;lt;none&amp;gt;          2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    &amp;lt;none&amp;gt;          2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#去掉master01的标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node master01 node-role.kubernetes.io/control-plane-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/master01 unlabeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES    AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#设置master01的标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl label node master01 node-role.kubernetes.io/master=master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/master01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES    AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    master   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    &amp;lt;none&amp;gt;   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#设置其他节点的标签&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node node01  node-role.kubernetes.io/work01=work01&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node01 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node node02  node-role.kubernetes.io/work02=work02&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node02 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl label node node03  node-role.kubernetes.io/work03=work03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node/node03 labeled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 /kubenetes/yaml]# kubectl get nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES    AGE     VERSION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    master   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    work01   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    work02   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    work03   2d23h   v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get nodes --show-labels&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       STATUS   ROLES    AGE     VERSION   LABELS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master01   Ready    master   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=master01,kubernetes.io/os=linux,node-role.kubernetes.io/master=master,node.kubernetes.io/exclude-from-external-load-balancers=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node01     Ready    work01   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node01,kubernetes.io/os=linux,node-role.kubernetes.io/work01=work01&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node02     Ready    work02   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node02,kubernetes.io/os=linux,node-role.kubernetes.io/work02=work02&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node03     Ready    work03   2d23h   v1.30.3   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=node03,kubernetes.io/os=linux,node-role.kubernetes.io/work03=work03&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;更改role角色标签和更改node的标签是不一样的&quot;&gt;&lt;a href=&quot;#更改role角色标签和更改node的标签是不一样的&quot; class=&quot;headerlink&quot; title=&quot;更改role角色标签和更改node的标签是不一样的&quot;&gt;&lt;/a&gt;更改role角色标签和更改node的标签是不一样的&lt;/h3&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/15/namesapce/"/>
    <id>http://ethanyeun.github.io/2024/08/15/namesapce/</id>
    <published>2024-08-15T10:09:56.688Z</published>
    <updated>2024-08-15T10:25:20.515Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;namespace-资源限制&quot;&gt;&lt;a href=&quot;#namespace-资源限制&quot; class=&quot;headerlink&quot; title=&quot;namespace 资源限制&quot;&gt;&lt;/a&gt;namespace 资源限制&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#资源限制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kind: ResourceQuota&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name: quota&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  namespace: jenny&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  hard:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    limits.cpu: 2     #限制所有cpu不能超过这个值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    limits.memory: 4Gi    #限制所有内存不能超过这个值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu: 1           #请求的cpu不能超过这个值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    memory: 1Gi     #请求的内存不能超过这个值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pods: 10       #限制pod的数量为10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt; #&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;创建pod&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1 apiVersion: v1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2 kind: Pod&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 3 metadata:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 4   name: ethan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 5   namespace: lucas&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 6   labels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 7     app: nginx-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 8 spec:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 9   containers:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10   - name: helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11     image: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12     imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13     ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14     - containerPort: 80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15     resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16       requests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17         memory: &amp;quot;100Mi&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18         cpu: &amp;quot;250m&amp;quot;   #4/1 cpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19       limits:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20         memory: &amp;quot;500Mi&amp;quot;  #500M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21         cpu: &amp;quot;500m&amp;quot;   #毫核半个cpu&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#查看资源限制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get resourcequota -n jenny&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME    AGE   REQUEST                               LIMIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;quota   15m   cpu: 0/1, memory: 0/1Gi, pods: 1/10   limits.cpu: 0/2, limits.memory: 0/4Gi&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;资源限制后你超过的限制的pod或者其他资源类型将无法创建并提示&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/14/kubectl%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://ethanyeun.github.io/2024/08/14/kubectl%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2024-08-14T08:29:08.559Z</published>
    <updated>2024-08-14T12:25:14.906Z</updated>
    
    
    <summary type="html">&lt;p&gt;kubectl常用命令&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看pod中所有容器的日志  -c指定容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl logs -n jenny ethan -c helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看pod的详细信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl describe pods/ethan -n jenny -c helloy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看apiserver和证书位置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl config view&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;进入pod中的容器 -c指定容器 -- pod默认容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl -n jenny exec -it ethan -- /bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl -n jenny exec -it ethan -c helloy /bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;删除容器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl delete pods ethan -n jenny&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看pod的所有标签&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -n jenny --show-lables&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看知道标签的pod&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl get pods -l nginx-1 -n jenny&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/13/docker%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5k8s/"/>
    <id>http://ethanyeun.github.io/2024/08/13/docker%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5k8s/</id>
    <published>2024-08-13T14:46:16.699Z</published>
    <updated>2024-08-28T12:14:58.775Z</updated>
    
    
    <summary type="html">&lt;p&gt;docker镜像导入k8s&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#设置docker镜像加速地址&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /etc/docker/daemon.json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;quot;registry-mirrors&amp;quot;: [&amp;quot;https://docker.rainbond.cc/&amp;quot;,&amp;quot;https://docker.m.daocloud.io&amp;quot;,&amp;quot;https://noohub.ru&amp;quot;,&amp;quot;https://huecker.io&amp;quot;,&amp;quot;https://dockerhub.timeweb.cloud&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#重启后拉去镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker pull nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Using default tag: latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; latest: Pulling from library/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e4fff0779e6d: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9c4e4e507b08: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85664e7b25d6: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e9d00ba15cc0: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ca3474dd2ca6: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;472851929ad7: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ed60582f2661: Pull complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Digest: sha256:93db6ea665b5485e59f0b35e506456b5055925d43011bdcc459d556332d231a2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Status: Downloaded newer image for nginx:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker.io/library/nginx:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# docker images&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;REPOSITORY   TAG       IMAGE ID       CREATED       SIZE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginx        latest    900dca2a61f5   7 weeks ago   188MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#保存镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# docker save -o nginx.tar.gz nginx:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看镜像成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;anaconda-ks.cfg  nginx.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ctr加入域名导入镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# ctr -n k8s.io image import nginx.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unpacking docker.io/library/nginx:latest (sha256:7183446dbb193731a504732a9399947a37f54477a61efff97113ebd23f31ad00)...done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#删除镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# crictl rmi docker.io/library/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Deleted: docker.io/library/nginx:latest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#导入镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# ctr -n k8s.io image import nginx.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unpacking docker.io/library/nginx:latest (sha256:7183446dbb193731a504732a9399947a37f54477a61efff97113ebd23f31ad00)...done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#查看镜像&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@master01 ~]# crictl images&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IMAGE                                                             TAG                 IMAGE ID            SIZE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker.io/library/nginx                                           latest              900dca2a61f57       192MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;registry.aliyuncs.com/google_containers/nginx                     latest              &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;也可以在/etc/containerd/cer.d/下面添加docker，aliyun，tengxun各种镜像加速，他就能自动识别各种镜像&lt;/code&gt;也可以使用手动的方法导入镜像&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/13/k8s/"/>
    <id>http://ethanyeun.github.io/2024/08/13/k8s/</id>
    <published>2024-08-13T10:28:23.239Z</published>
    <updated>2024-08-13T14:46:36.851Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;k8s1-30安装&quot;&gt;&lt;a href=&quot;#k8s1-30安装&quot; class=&quot;headerlink&quot; title=&quot;k8s1.30安装&quot;&gt;&lt;/a&gt;k8s1.30安装&lt;/h1&gt;&lt;h2 id=&quot;1-环境配置（所有）&quot;&gt;&lt;a href=&quot;#1-环境配置（所有）&quot; class=&quot;headerlink&quot; title=&quot;1.环境配置（所有）&quot;&gt;&lt;/a&gt;1.环境配置（所有）&lt;/h2&gt;&lt;h1 id=&quot;行号&quot;&gt;&lt;a href=&quot;#行号&quot; class=&quot;headerlink&quot; title=&quot;行号&quot;&gt;&lt;/a&gt;行号&lt;/h1&gt;&lt;p&gt;echo “set nu” &amp;gt;&amp;gt; &amp;#x2F;root&amp;#x2F;.vimrc&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭防火墙&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl disable --now firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -F &amp;amp;&amp;amp; iptables -t nat -F &amp;amp;&amp;amp; iptables -t mangle -F &amp;amp;&amp;amp; iptables -X &amp;amp;&amp;amp; iptables -P FORWARD ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl status firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭selinux&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;/^SELINUX=/cSELINUX=disabled&amp;#x27; /etc/selinux/config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setenforce 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭swap分区  备份此文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;swapoff -a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i.bak &amp;#x27;/swap/s/^/#/&amp;#x27; /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;free -h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;配置阿里云网络源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -e &amp;#x27;s|^mirrorlist=|#mirrorlist=|g&amp;#x27; &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -e &amp;#x27;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g&amp;#x27; &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -i.bak &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /etc/yum.repos.d/Rocky-*.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf makecache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install epel-release&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;启用 IPv4 数据包转发&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;overlay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo modprobe overlay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo modprobe br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;设置所需的 sysctl 参数，参数在重新启动后保持不变&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | sudo tee /etc/sysctl.d/k8s.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.bridge.bridge-nf-call-iptables  = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.bridge.bridge-nf-call-ip6tables = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.ip_forward                 = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;应用 sysctl 参数而不重新启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo sysctl --system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看是否生效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod | grep br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod | grep overlay&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;时间服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf -y install chrony&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now chronyd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;date&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chronyc sources&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;continaerd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf install -y containerd &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ctr --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ctr containerd.io 1.7.19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /etc/containerd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;containerd config default &amp;gt; /etc/containerd/config.toml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/registry.k8s.io/registry.aliyuncs.com&#92;/google_containers/&amp;#x27; /etc/containerd/config.toml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SystemdCgroup = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now containerd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | tee /etc/yum.repos.d/kubernetes.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[kubernetes]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name=Kubernetes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;baseurl=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgkey=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/repodata/repomd.xml.key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf install -y kubelet kubeadm kubectl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now kubelet&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubelet --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Kubernetes v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;拉去需要的镜像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;指定容器运行时为containerd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;crictl config runtime-endpoint /run/containerd/containerd.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;kubectl命令补全&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl completion bash &amp;gt;/etc/bash_completion.d/kubectl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm completion bash &amp;gt;/etc/bash_completion.d/kubeadm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;初始化文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm config print init-defaults &amp;gt; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更改容器的镜像地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/registry.k8s.io/registry.aliyuncs.com&#92;/google_containers/&amp;#x27; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更改容器地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;find / -name &amp;quot;containerd.sock&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/run/containerd/containerd.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更改masterip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/1.2.3.4/10.10.10.10/&amp;#x27; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address 172.29.1.101 --image-repository registry.aliyuncs.com/google_containers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;初始化&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm init --config=kubeadm-init.yaml | tee kubeadm-init.log&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/08/12/k8s.1.30.3%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86/"/>
    <id>http://ethanyeun.github.io/2024/08/12/k8s.1.30.3%E5%AE%89%E8%A3%85%E8%AF%A6%E7%BB%86/</id>
    <published>2024-08-12T08:09:54.693Z</published>
    <updated>2024-08-12T15:54:19.750Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;k8s1-30安装&quot;&gt;&lt;a href=&quot;#k8s1-30安装&quot; class=&quot;headerlink&quot; title=&quot;k8s1.30安装&quot;&gt;&lt;/a&gt;k8s1.30安装&lt;/h1&gt;&lt;h2 id=&quot;1-环境配置（所有）&quot;&gt;&lt;a href=&quot;#1-环境配置（所有）&quot; class=&quot;headerlink&quot; title=&quot;1.环境配置（所有）&quot;&gt;&lt;/a&gt;1.环境配置（所有）&lt;/h2&gt;&lt;h1 id=&quot;行号&quot;&gt;&lt;a href=&quot;#行号&quot; class=&quot;headerlink&quot; title=&quot;行号&quot;&gt;&lt;/a&gt;行号&lt;/h1&gt;&lt;p&gt;echo “set nu” &amp;gt;&amp;gt; &amp;#x2F;root&amp;#x2F;.vimrc&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭防火墙&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl disable --now firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iptables -F &amp;amp;&amp;amp; iptables -t nat -F &amp;amp;&amp;amp; iptables -t mangle -F &amp;amp;&amp;amp; iptables -X &amp;amp;&amp;amp; iptables -P FORWARD ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl status firewalld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭selinux&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;/^SELINUX=/cSELINUX=disabled&amp;#x27; /etc/selinux/config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setenforce 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;关闭swap分区  备份此文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;swapoff -a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i.bak &amp;#x27;/swap/s/^/#/&amp;#x27; /etc/fstab&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;free -h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;配置阿里云网络源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -e &amp;#x27;s|^mirrorlist=|#mirrorlist=|g&amp;#x27; &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -e &amp;#x27;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g&amp;#x27; &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -i.bak &#92;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /etc/yum.repos.d/Rocky-*.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf makecache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install epel-release&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;启用 IPv4 数据包转发&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;overlay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo modprobe overlay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo modprobe br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;设置所需的 sysctl 参数，参数在重新启动后保持不变&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | sudo tee /etc/sysctl.d/k8s.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.bridge.bridge-nf-call-iptables  = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.bridge.bridge-nf-call-ip6tables = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.ip_forward                 = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;应用 sysctl 参数而不重新启动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo sysctl --system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;查看是否生效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod | grep br_netfilter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod | grep overlay&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;时间服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf -y install chrony&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now chronyd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timedatectl &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;date&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chronyc sources&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;continaerd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf install -y containerd &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ctr --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ctr containerd.io 1.7.19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /etc/containerd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;containerd config default &amp;gt; /etc/containerd/config.toml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/registry.k8s.io/registry.aliyuncs.com&#92;/google_containers/&amp;#x27; /etc/containerd/config.toml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SystemdCgroup = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now containerd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;lt;&amp;lt;EOF | tee /etc/yum.repos.d/kubernetes.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[kubernetes]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name=Kubernetes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;baseurl=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enabled=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgcheck=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgkey=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/repodata/repomd.xml.key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dnf install -y kubelet kubeadm kubectl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl enable --now kubelet&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubelet --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Kubernetes v1.30.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;拉去需要的镜像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;指定容器运行时为containerd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;crictl config runtime-endpoint /run/containerd/containerd.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;kubectl命令补全&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubectl completion bash &amp;gt;/etc/bash_completion.d/kubectl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm completion bash &amp;gt;/etc/bash_completion.d/kubeadm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;初始化文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm config print init-defaults &amp;gt; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更改容器的镜像地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/registry.k8s.io/registry.aliyuncs.com&#92;/google_containers/&amp;#x27; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;更改masterip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &amp;#x27;s/1.2.3.4/10.10.10.10/&amp;#x27; /etc/kubernetes/init-default.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address 172.29.1.101 --image-repository registry.aliyuncs.com/google_containers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta prompt_&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;初始化&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kubeadm init --config=kubeadm-init.yaml | tee kubeadm-init.log&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/07/31/linux%E5%91%BD%E4%BB%A4/"/>
    <id>http://ethanyeun.github.io/2024/07/31/linux%E5%91%BD%E4%BB%A4/</id>
    <published>2024-07-31T02:01:35.682Z</published>
    <updated>2024-08-03T05:14:34.376Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;linux命令&quot;&gt;&lt;a href=&quot;#linux命令&quot; class=&quot;headerlink&quot; title=&quot;linux命令&quot;&gt;&lt;/a&gt;linux命令&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;alias别名   防止删除错误 方便命令&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;grep -n -a 2 “Failed” &amp;#x2F;var&amp;#x2F;log&amp;#x2F;message  打印上两行  -b打印下两行 -c打印上下两行    grep&lt;code&gt;正则过滤&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sed &lt;code&gt;替换&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;vim &lt;code&gt;高亮&lt;/code&gt;中的%s#master#node#g  %表示全局，1表示第一行和sed差不多 &lt;code&gt;替换&lt;/code&gt;  &lt;code&gt;搜索&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ctrl + v  批量删除  替换&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;linux下的软件包类型有&lt;code&gt;rpm简单需要依赖，版本偏低&lt;/code&gt;，&lt;code&gt;源码开发的代码需要自己手动打包&lt;/code&gt;，&lt;code&gt;二进制预制菜，解压即可使用&lt;/code&gt;，&lt;code&gt;yum，最常用只需要有网自己解决依赖&lt;/code&gt;除了yum其他的都可能会有依赖centos他们的软件都是rpm结尾的软件包 &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[rpm包地址](&lt;a href=&quot;https://rpmfind.net/&quot;&gt;Rpmfind mirror&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;is-enable&lt;/strong&gt;  开机是否自启 systemd软件管理&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;journalctl -xe   是可以进行搜索的&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;zabbix-release（包含repo文件）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;磁盘满后用  df -sh &amp;#x2F;*  精确到大文件，确认后删除&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;没有包只知道命令可以用&lt;code&gt;yum provides pstree&lt;/code&gt;来查询这个包的名称，pstree是查看进程树的 pstree -p查看进程号&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/07/31/linux%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
    <id>http://ethanyeun.github.io/2024/07/31/linux%E5%BF%AB%E6%8D%B7%E9%94%AE/</id>
    <published>2024-07-31T01:58:26.188Z</published>
    <updated>2024-07-31T01:58:33.153Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;linux快捷键&quot;&gt;&lt;a href=&quot;#linux快捷键&quot; class=&quot;headerlink&quot; title=&quot;linux快捷键&quot;&gt;&lt;/a&gt;linux快捷键&lt;/h1&gt;&lt;h2 id=&quot;1-通用快捷键&quot;&gt;&lt;a href=&quot;#1-通用快捷键&quot; class=&quot;headerlink&quot; title=&quot;1.通用快捷键&quot;&gt;&lt;/a&gt;1.通用快捷键&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Ctrl + A&lt;/code&gt; 或 &lt;code&gt;Home&lt;/code&gt;：将光标移动到行首。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Ctrl + E&lt;/code&gt; 或 &lt;code&gt;End&lt;/code&gt;：将光标移动到行尾。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Ctrl + B&lt;/code&gt; 或 &lt;code&gt;Left&lt;/code&gt;：向左移动光标一个字符。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Ctrl + F&lt;/code&gt; 或 &lt;code&gt;Right&lt;/code&gt;：向右移动光标一个字符。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;Ctrl + K&lt;/code&gt; 或 &lt;code&gt;Ctrl + U&lt;/code&gt;：删除光标后的所有字符&amp;#x2F;剪切光标前的字&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;2-文件内快捷键&quot;&gt;&lt;a href=&quot;#2-文件内快捷键&quot; class=&quot;headerlink&quot; title=&quot;2.文件内快捷键&quot;&gt;&lt;/a&gt;2.文件内快捷键&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;G&lt;/code&gt;到文件末尾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;gg&lt;/code&gt;到文件开头&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;d0&lt;/code&gt;删除光标前一个字母到首行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;D&lt;/code&gt;删除光标整行到末尾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;X&lt;/code&gt;删除光标前的字符&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;x&lt;/code&gt;删除光标后的字符&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://ethanyeun.github.io/2024/07/22/%E6%9E%B6%E6%9E%84/"/>
    <id>http://ethanyeun.github.io/2024/07/22/%E6%9E%B6%E6%9E%84/</id>
    <published>2024-07-22T05:42:24.278Z</published>
    <updated>2024-08-03T05:23:30.851Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;运维架构&quot;&gt;&lt;a href=&quot;#运维架构&quot; class=&quot;headerlink&quot; title=&quot;运维架构&quot;&gt;&lt;/a&gt;运维架构&lt;/h1&gt;&lt;p&gt;运维知识体系&lt;br&gt;负载均衡 :nginx lvs f5 a10&lt;br&gt;web应用:nginx apache tomcat&lt;br&gt;数据库:mysql oracle db2 sqlserver&lt;br&gt;中间件：redis memcache mongdb&lt;br&gt;缓冲&amp;#x2F;消息队列：MQ redis kafka&lt;br&gt;自动化工具 :ansible jenkins pash gitlab docker&lt;br&gt;日志分析:efk elk&lt;br&gt;监控:zabbix prometheus nagios pt-tools。&lt;br&gt;常见服务:ftp ssh DNS&lt;br&gt;虚拟化:docker k8s KVM&lt;br&gt;编程: shell python java&lt;br&gt;devops开发方案:jenkins gitlab svn elk&lt;br&gt;版本控制:svn git&lt;br&gt;储存:nfs hadoop fastdfs HDFS MFS&lt;br&gt;安全:MD5 fail2ban ddos&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
</feed>
